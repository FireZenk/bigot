(function(){var a,b;b=require("underscore"),a=require("fs"),exports.render=function(c,d){var e,f,g;return f=Array.isArray||function(a){return toString.call("[object Array]"===a)},g=function(a){return a===Object(a)},(e=function(c,d){return b.each(d,function(d,h){var i,j,k,l,m,n,o,p;return-1!==c.indexOf("{include "+h+"}")?(l=a.readFileSync(d,"utf-8"),c=c.replace("{include "+h+"}",l)):-1!==c.indexOf("{if "+h+"}")?(d.call()?(c=c.replace("{if "+h+"}",""),o=c.lastIndexOf("{else}"),i=c.indexOf("{end "+h+"}")+6+(""+h).length,c=c.replace(c.slice(o,i),"")):(o=c.indexOf("{if "+h+"}"),i=c.lastIndexOf("{else}")+6,c=c.replace(c.slice(o,i),""),c=c.replace("{end "+h+"}","")),c):f(d)?(o=c.indexOf("{loop "+h+"}"),void 0!==o?(p=7+o+(""+h).length,i=c.indexOf("{end "+h+"}"),j=c.slice(p,i),k="",b.each(d,function(a){var c;return g(a)?(c=j,b.each(a,function(b,d){var g,h,i;return f(b)?(i=c.indexOf("{loop "+d+"}"),g=6+c.indexOf("{end "+d+"}")+(""+d).length,h=e(c.slice(i,g),a),c=c.slice(0,i)+h+c.slice(g,j.length)):c=c.replace("{"+d+"}",b)}),k+=c):k+=j.replace("{@}",a)}),m=c.slice(i,c.length),n=c.slice(0,o),c=n+k+m.replace("{end "+h+"}","")):void 0):c=c.replace("{"+h+"}",d)}),c})(c,d)}}).call(this);