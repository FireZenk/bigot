(function(){var a,b;b=require("underscore"),a=require("fs"),exports.render=function(c,d){var e;return(e=function(c,d){return b.each(d,function(d,f){var g,h,i,j,k,l,m,n;return-1!==c.indexOf("{include "+f+"}")?(j=a.readFileSync(d,"utf-8"),c=c.replace("{include "+f+"}",j)):b.isArray(d)?(m=c.indexOf("{loop "+f+"}"),void 0!==m?(n=7+m+(""+f).length,g=c.indexOf("{end "+f+"}"),h=c.slice(n,g),i="",b.each(d,function(a){var c;return b.isObject(a)?(c=h,b.each(a,function(d,f){var g,i,j;return b.isArray(d)?(j=c.indexOf("{loop "+f+"}"),g=6+c.indexOf("{end "+f+"}")+(""+f).length,i=e(c.slice(j,g),a),c=c.slice(0,j)+i+c.slice(g,h.length)):c=c.replace("{"+f+"}",d)}),i+=c):i+=h.replace("{@}",a)}),k=c.slice(g,c.length),l=c.slice(0,m),c=l+i+k.replace("{end "+f+"}","")):void 0):c=c.replace("{"+f+"}",d)}),c})(c,d)}}).call(this);